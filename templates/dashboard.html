{% extends "base.html" %}
{% block title %}Dashboard - DevMate{% endblock %}
{% block content %}

<div class="card shadow-lg border-0 rounded-4 p-4" style="background-color:#161b22; color:#e6edf3;">
  <h2 class="text-center mb-4" style="color:#58a6ff;">ðŸ“Š Analysis Dashboard</h2>

  {% if analyses %}
  <table class="table table-dark table-striped table-hover align-middle">
    <thead>
      <tr style="background-color:#0d1117; color:#f0f6fc;">
        <th>Repository</th>
        <th>Score</th>
        <th>Date</th>
        <th>Report</th>
      </tr>
    </thead>
    <tbody>
      {% for a in analyses %}
      <tr>
        <td>{{ a.repo_name }}</td>
        <td>{{ a.score }}/10</td>
        <td>{{ a.timestamp.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>
          {% if a.pdf_path and a.pdf_path != "Generating..." and a.pdf_path != "Error generating PDF" %}
            <a href="{{ url_for('static', filename=a.pdf_path) }}" class="btn btn-sm btn-success" target="_blank">View PDF</a>
          {% else %}
            <span class="text-warning">{{ a.pdf_path }}</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p class="text-center" style="color:#8b949e;">No analyses yet. Try analyzing a repository!</p>
  {% endif %}
</div>

{% endblock %}
